{% extends "base.html" %}
{% block title %}ValueBet Bot â€” Accueil{% endblock %}
{% block content %}
<div class="container">
    <div class="hero">
        <h1>ðŸŽ¯ ValueBet Bot</h1>
        <p>DÃ©tection automatique de paris Ã  valeur en Ligue 1 et Premier League<br>via modÃ¨le de Poisson et Expected Goals.</p>
        <div class="btn-row">
            <a href="/live" class="btn btn-primary">âš¡ Paris du jour</a>
            <a href="/history" class="btn btn-secondary">ðŸ“‹ Historique</a>
            <a href="/stats" class="btn btn-secondary">ðŸ“Š Statistiques</a>
        </div>
    </div>

    <div id="quick-stats" class="stat-grid"></div>

    <div class="card">
        <h2>Comment Ã§a fonctionne</h2>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-top:1rem">
            <div>
                <div style="font-size:1.5rem;margin-bottom:.5rem">ðŸ“¥</div>
                <strong>1. Collecte de donnÃ©es</strong>
                <p style="color:var(--text-dim);font-size:.85rem;margin-top:.3rem">API-Sports pour les stats Ã©quipes, The Odds API pour les cotes Winamax/Betclic</p>
            </div>
            <div>
                <div style="font-size:1.5rem;margin-bottom:.5rem">ðŸ§®</div>
                <strong>2. ModÃ¨le Poisson</strong>
                <p style="color:var(--text-dim);font-size:.85rem;margin-top:.3rem">Calcul des xG via forces attaque/dÃ©fense, distribution de Poisson pour les probas</p>
            </div>
            <div>
                <div style="font-size:1.5rem;margin-bottom:.5rem">ðŸ’Ž</div>
                <strong>3. DÃ©tection de value</strong>
                <p style="color:var(--text-dim);font-size:.85rem;margin-top:.3rem">Value = (Cote BK Ã— Proba modÃ¨le) - 1 > seuil configurÃ© (dÃ©faut 5%)</p>
            </div>
            <div>
                <div style="font-size:1.5rem;margin-bottom:.5rem">ðŸ“²</div>
                <strong>4. Notification Telegram</strong>
                <p style="color:var(--text-dim);font-size:.85rem;margin-top:.3rem">Top 5 value bets envoyÃ©s automatiquement chaque matin Ã  8h UTC</p>
            </div>
        </div>
    </div>
</div>

<script>
fetch('/api/stats').then(r=>r.json()).then(data=>{
    const o = data.overall;
    const grid = document.getElementById('quick-stats');
    const items = [
        {label:'Paris totaux', value: o.total || 0},
        {label:'Taux de rÃ©ussite', value: (o.win_rate||0)+'%'},
        {label:'ROI', value: (o.roi||0)+'%'},
        {label:'Value moy.', value: '+'+(o.avg_value_pct||0)+'%'},
        {label:'En attente', value: o.pending||0},
    ];
    grid.innerHTML = items.map(i=>
        `<div class="stat-card">
            <div class="value">${i.value}</div>
            <div class="label">${i.label}</div>
        </div>`
    ).join('');
});
</script>
{% endblock %}
